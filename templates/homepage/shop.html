{% load staticfiles %}

<script type="text/javascript" src="{% static "library/html5-qrcode/lib/html5-qrcode.min.js" %}"></script>
<script type="text/javascript" src="{% static "library/html5-qrcode/lib/jsqrcode-combined.min.js" %}"></script>
{% csrf_token %}
<p>Hallo</p>
<div id="reader" style="width:300px;height:300px">
 </div>

<form method="POST" id="post-form">
    {% csrf_token %}
    <input id="qrcode" name="qr" type="hidden">
    <select name="drink">
        <option value="Beer" selected>beer</option>
        <option value="Wine">Wine</option>
        <option value="Cola">Cola</option>
        <option value="Liquor">Liquor</option>
    </select>
    <input div="#number" type="number" name="amount" value="1">

</form>

<script>

$('#post-form').on('submit', function(event){
    console.log("form submitted!")  // sanity check
    $("#number").val(0)

});

$('#reader').html5_qrcode(function(data){
    console.log("read");
    $("#qrcode").val(data);
    console.log("read:"+data)
    $('#post-form').submit();

 	},
 	function(error){
		//show read errors
	}, function(videoError){
		//the video stream could be opened
	}
);
</script>